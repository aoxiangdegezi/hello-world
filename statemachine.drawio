<mxfile host="app.diagrams.net" modified="2024-03-03T14:23:13.348Z" agent="Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/121.0.0.0 Safari/537.36" etag="aPW2PDu4nitZwOl1MrE1" version="24.0.0" type="github">
  <diagram name="第 1 页" id="jQyt6PN3O-9ILQwhtGz-">
    <mxGraphModel dx="1207" dy="765" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="jAPCvnGw42VJ1_7bwacQ-2" value="IStateMachine" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="20" y="750" width="140" height="63.75" as="geometry" />
        </mxCell>
        <mxCell id="jAPCvnGw42VJ1_7bwacQ-9" value="" style="group" parent="1" vertex="1" connectable="0">
          <mxGeometry x="490" y="740" width="210" height="180" as="geometry" />
        </mxCell>
        <mxCell id="jAPCvnGw42VJ1_7bwacQ-5" value="StateRegistry" style="rounded=1;whiteSpace=wrap;html=1;" parent="jAPCvnGw42VJ1_7bwacQ-9" vertex="1">
          <mxGeometry width="160" height="60" as="geometry" />
        </mxCell>
        <mxCell id="jAPCvnGw42VJ1_7bwacQ-8" value="存储与状态的所有有关的信息&lt;div&gt;1.state&lt;/div&gt;&lt;div&gt;2.triggerBehaviors&lt;/div&gt;&lt;div&gt;3.entry/exitActions&lt;/div&gt;&lt;div&gt;4.substates&lt;/div&gt;&lt;div&gt;5.initalState&lt;/div&gt;" style="text;strokeColor=none;align=left;fillColor=none;html=1;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="jAPCvnGw42VJ1_7bwacQ-9" vertex="1">
          <mxGeometry y="60" width="210" height="110" as="geometry" />
        </mxCell>
        <mxCell id="jAPCvnGw42VJ1_7bwacQ-12" value="" style="group" parent="1" vertex="1" connectable="0">
          <mxGeometry x="490" y="550" width="190" height="170" as="geometry" />
        </mxCell>
        <mxCell id="jAPCvnGw42VJ1_7bwacQ-4" value="MachineRegistry" style="rounded=1;whiteSpace=wrap;html=1;" parent="jAPCvnGw42VJ1_7bwacQ-12" vertex="1">
          <mxGeometry width="190" height="60" as="geometry" />
        </mxCell>
        <mxCell id="jAPCvnGw42VJ1_7bwacQ-10" value="状态机的仓库类，用于存储状态机的实际配置&lt;div&gt;1.containedStates：本状态机所有StateRegistry&lt;/div&gt;&lt;div&gt;2.triggerConfiguration：状态机可接受的trigger&lt;/div&gt;&lt;div&gt;3.initalState: 初始状态&lt;/div&gt;" style="text;strokeColor=none;align=left;fillColor=none;html=1;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="jAPCvnGw42VJ1_7bwacQ-12" vertex="1">
          <mxGeometry y="60" width="190" height="110" as="geometry" />
        </mxCell>
        <mxCell id="jAPCvnGw42VJ1_7bwacQ-15" value="" style="group" parent="1" vertex="1" connectable="0">
          <mxGeometry x="490" y="920" width="210" height="93.75" as="geometry" />
        </mxCell>
        <mxCell id="jAPCvnGw42VJ1_7bwacQ-13" value="MachineConfigurer" style="rounded=1;whiteSpace=wrap;html=1;" parent="jAPCvnGw42VJ1_7bwacQ-15" vertex="1">
          <mxGeometry width="200" height="63.75" as="geometry" />
        </mxCell>
        <mxCell id="jAPCvnGw42VJ1_7bwacQ-14" value="状态机工厂类，设置状态机配置的入口" style="text;strokeColor=none;align=center;fillColor=none;html=1;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="jAPCvnGw42VJ1_7bwacQ-15" vertex="1">
          <mxGeometry y="63.75" width="210" height="30" as="geometry" />
        </mxCell>
        <mxCell id="jAPCvnGw42VJ1_7bwacQ-18" value="" style="group" parent="1" vertex="1" connectable="0">
          <mxGeometry x="300" y="550" width="145" height="95" as="geometry" />
        </mxCell>
        <mxCell id="jAPCvnGw42VJ1_7bwacQ-3" value="IStateMachineStatus" style="rounded=1;whiteSpace=wrap;html=1;" parent="jAPCvnGw42VJ1_7bwacQ-18" vertex="1">
          <mxGeometry x="2.5" width="140" height="60" as="geometry" />
        </mxCell>
        <mxCell id="jAPCvnGw42VJ1_7bwacQ-17" value="状态信息" style="text;strokeColor=none;align=left;fillColor=none;html=1;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="jAPCvnGw42VJ1_7bwacQ-18" vertex="1">
          <mxGeometry y="65" width="145" height="30" as="geometry" />
        </mxCell>
        <mxCell id="jAPCvnGw42VJ1_7bwacQ-19" value="" style="group" parent="1" vertex="1" connectable="0">
          <mxGeometry x="270" y="710" width="190" height="110" as="geometry" />
        </mxCell>
        <mxCell id="jAPCvnGw42VJ1_7bwacQ-11" value="IStateMachineContext" style="rounded=1;whiteSpace=wrap;html=1;" parent="jAPCvnGw42VJ1_7bwacQ-19" vertex="1">
          <mxGeometry width="190" height="63.75" as="geometry" />
        </mxCell>
        <mxCell id="jAPCvnGw42VJ1_7bwacQ-16" value="用来存储状态机的上下文信息" style="text;strokeColor=none;align=center;fillColor=none;html=1;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="jAPCvnGw42VJ1_7bwacQ-19" vertex="1">
          <mxGeometry y="80" width="190" height="30" as="geometry" />
        </mxCell>
        <mxCell id="BBn1zPqoFVNGkyh3_7BI-2" value="" style="group" vertex="1" connectable="0" parent="1">
          <mxGeometry x="20" y="550" width="140" height="90" as="geometry" />
        </mxCell>
        <mxCell id="jAPCvnGw42VJ1_7bwacQ-6" value="TriggerBehaviour" style="rounded=1;whiteSpace=wrap;html=1;" parent="BBn1zPqoFVNGkyh3_7BI-2" vertex="1">
          <mxGeometry width="140" height="60" as="geometry" />
        </mxCell>
        <mxCell id="BBn1zPqoFVNGkyh3_7BI-1" value="定义触发器行为" style="text;strokeColor=none;align=center;fillColor=none;html=1;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="BBn1zPqoFVNGkyh3_7BI-2">
          <mxGeometry y="60" width="100" height="30" as="geometry" />
        </mxCell>
        <mxCell id="BBn1zPqoFVNGkyh3_7BI-3" value="配置规则：&lt;div&gt;1.状态机需要指定初始状态&lt;/div&gt;&lt;div&gt;2.如果未指定状态，会以第一个配置状态的叶状态为默认初始状态&lt;/div&gt;&lt;div&gt;3.多个触发器配置在parent/child状态下，优先出发子&lt;/div&gt;&lt;div&gt;4.同一个状态上注册同一个触发器，指向不同的目标状态，以第一个注册的为准&lt;/div&gt;&lt;div&gt;5.父/子拥有同一个触发器，可通过添加guard，控制状态转换&lt;/div&gt;&lt;div&gt;6.状态流转时，如果未能通过guard，状态不变&lt;/div&gt;&lt;div&gt;7.子状态继承父状态的触发器，&lt;/div&gt;" style="text;strokeColor=none;align=left;fillColor=none;html=1;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="810" y="560" width="310" height="270" as="geometry" />
        </mxCell>
        <mxCell id="BBn1zPqoFVNGkyh3_7BI-4" value="permit&lt;div&gt;permitIf&lt;/div&gt;&lt;div&gt;permitDynamic&lt;/div&gt;&lt;div&gt;permitReentry&lt;/div&gt;" style="text;strokeColor=none;align=left;fillColor=none;html=1;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="800" y="900" width="270" height="150" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
